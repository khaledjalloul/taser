{
    "dockerFile": "Dockerfile",
    "build": {
        // "target": "ros-jazzy"
        // "target": "isaaclab"
        "target": "isaaclab-ros-humble"
    },
    "postCreateCommand": "bash .devcontainer/post_create.bash",
    "customizations": {
        "vscode": {
            "extensions": [
                // Python
                "ms-python.python",
                "ms-python.autopep8",
                "ms-python.vscode-pylance",
                // C++
                "ms-vscode.cpptools",
                "ms-vscode.cpptools-extension-pack",
                "kylinideteam.cmake-intellisence",
                "xaver.clang-format",
                // Docker
                "ms-azuretools.vscode-docker",
                // Misc
                "redhat.vscode-yaml",
                "redhat.vscode-xml",
                "yzhang.markdown-all-in-one",
                "foxundermoon.shell-format",
                // GitLens
                "eamodio.gitlens",
                // ROS
                "morningfrog.urdf-visualizer"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/home/vscode/venv/bin/python3.12",
                "python.analysis.typeCheckingMode": "off",
                "C_Cpp.default.includePath": [
                    "${workspaceFolder}/**",
                    "/opt/ros/jazzy/include/**"
                ],
                "gitlens.codeLens.authors.enabled": false,
                "gitlens.codeLens.recentChange.enabled": false
            }
        }
    },
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace/colcon_ws,type=bind",
    "workspaceFolder": "/workspace/colcon_ws",
    "mounts": [
        // Enable GUI
        "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind,consistency=cached",
        // Enable Docker-in-Docker
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind",
        // Enable vscode settings persistence
        "source=wheed_humanoid-devcontainer-vscode-settings,target=/workspace/colcon_ws/.vscode,type=volume",
        // Enable colcon_ws persistence
        "source=wheed_humanoid-devcontainer-colcon_ws-build,target=/workspace/colcon_ws/build,type=volume",
        "source=wheed_humanoid-devcontainer-colcon_ws-install,target=/workspace/colcon_ws/install,type=volume"
        // Enable Isaac Sim cache persistence
        // "source=wheeled_humanoid-devcontainer-isaac-cache-kit,target=/isaac-sim/kit/cache,type=volume",
        // "source=wheeled_humanoid-devcontainer-isaac-cache-ov,target=/root/.cache/ov,type=volume",
        // "source=wheeled_humanoid-devcontainer-isaac-cache-pip,target=/root/.cache/pip,type=volume",
        // "source=wheeled_humanoid-devcontainer-isaac-cache-gl,target=/root/.cache/nvidia/GLCache,type=volume",
        // "source=wheeled_humanoid-devcontainer-isaac-cache-compute,target=/root/.nv/ComputeCache,type=volume"
    ],
    "runArgs": [
        "--device=/dev/dri"
    ],
    "containerEnv": {
        // Enable GUI
        "DISPLAY": "${env:DISPLAY}"
    }
}